<nav class="navbar navbar-expand nav-color"
     role="navigation"
     aria-label="Main navigation">

    <div class="container d-flex justify-content-between align-items-center">

        <!-- Logo / Home link -->
        <a class="navbar-brand"
           href="{% url 'home' %}"
           aria-label="Go to QuickFlicks home page">
            QuickFlicks
        </a>

        <div class="d-flex align-items-center">

            {% if user.is_authenticated %}

            <!-- Profile Dropdown -->
            <!-- Using aria-expanded + aria-haspopup for full screen-reader clarity -->
            <div class="dropdown">
                <button class="btn btn-outline dropdown-toggle"
                        type="button"
                        id="profileDropdown"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                        aria-haspopup="true"
                        aria-label="Open profile options menu">
                    My Profile
                </button>

                <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end"
                    aria-labelledby="profileDropdown"
                    role="menu">

                    <!-- View Profile -->
                    <li role="none">
                        <a class="dropdown-item"
                           href="{% url 'profile' %}"
                           role="menuitem"
                           aria-label="View your profile page">
                            üë§ View Profile
                        </a>
                    </li>

                    <!-- My Shelf -->
                    <li role="none">
                        <a class="dropdown-item"
                           href="{% url 'my_shelf' %}"
                           role="menuitem"
                           aria-label="View your saved movies">
                            üé¨ My Shelf
                        </a>
                    </li>

                    <li><hr class="dropdown-divider" role="none"></li>

                    <!-- Change Username -->
                    <li role="none">
                        <a class="dropdown-item"
                           href="{% url 'change_username' %}"
                           role="menuitem"
                           aria-label="Change your username">
                            ‚úèÔ∏è Change Username
                        </a>
                    </li>

                    <!-- Change Email -->
                    <li role="none">
                        <a class="dropdown-item"
                           href="{% url 'change_email' %}"
                           role="menuitem"
                           aria-label="Change your email address">
                            üìß Change Email
                        </a>
                    </li>

                    <!-- Change Password -->
                    <li role="none">
                        <a class="dropdown-item"
                           href="{% url 'password_change' %}"
                           role="menuitem"
                           aria-label="Change your account password">
                            üîê Change Password
                        </a>
                    </li>

                    <li><hr class="dropdown-divider" role="none"></li>

                    <!-- Logout Button -->
                    <li role="none">
                        <form method="post"
                              action="{% url 'logout' %}"
                              class="px-3 py-2"
                              aria-label="Log out of your QuickFlicks account">
                            {% csrf_token %}
                            <button type="submit"
                                    class="btn btn-danger w-100 d-flex align-items-center justify-content-center gap-2"
                                    aria-label="Log out">
                                <span aria-hidden="true">üö™</span>
                                Logout
                            </button>
                        </form>
                    </li>

                </ul>
            </div>

            {% else %}

            <!-- Login -->
            <a class="btn btn-outline me-2"
               href="{% url 'login' %}"
               aria-label="Login to your QuickFlicks account">
                Login
            </a>

            <!-- Sign Up -->
            <a class="btn btn-outline"
               href="{% url 'signup' %}"
               aria-label="Create a new QuickFlicks account">
                Sign Up
            </a>

            {% endif %}

        </div>
    </div>
</nav>
