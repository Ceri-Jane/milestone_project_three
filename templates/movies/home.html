{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- HERO SECTION -->
<div class="hero-box">

    <!-- Logo -->
    <img src="{% static 'images/logo.png' %}" 
         alt="QuickFlicks Logo" 
         class="hero-logo">

    <!-- Subtitle -->
    <p class="hero-subtitle">
        Explore thousands of movies with their details and ratings.<br>
        Sign up / Login to create your own shelves – keeping track of what you plan to watch and what you've already enjoyed.
    </p>

    {% if not user.is_authenticated %}
    <div class="hero-auth">
        <a href="{% url 'login' %}" class="btn-outline">Login</a>
        <a href="{% url 'signup' %}" class="btn-outline">Sign Up</a>
    </div>
    {% endif %}
</div>

<!-- SEARCH BAR -->
<form method="GET" action="{% url 'home' %}" class="search-form">
    <input 
        type="text" 
        name="query" 
        placeholder="Search for a movie..."
        value="{{ query }}">
    <button type="submit">Search</button>
</form>

<!-- Divider -->
<div class="page-divider"></div>

{% if movies %}
    <!-- Results heading -->
    <h2 class="results-heading">Results</h2>

    <div class="results-grid">

        {% for movie in movies %}
        <div class="movie-card">

            <div class="poster-area">
                <img 
                    src="https://image.tmdb.org/t/p/w300{{ movie.poster_path|default:'' }}"
                    onerror="this.src='{% static 'images/movie-poster-unavailable.jpg' %}'"
                    alt="{{ movie.title }}">
            </div>

            <div class="movie-title">{{ movie.title }}</div>

            <div class="movie-meta">
                {% if movie.vote_average %}
                    <div class="movie-rating">⭐ {{ movie.vote_average }}/10</div>
                {% else %}
                    <div class="movie-rating" style="visibility:hidden;">⭐</div>
                {% endif %}
                <div class="movie-date">{{ movie.release_date|default:"Unknown" }}</div>
            </div>

            <div class="movie-desc">
                {{ movie.overview|default:"No description available." }}
            </div>

        </div>
        {% endfor %}

    </div>

{% elif query %}
    <p class="no-results">No results found.</p>
{% endif %}

{% endblock %}
