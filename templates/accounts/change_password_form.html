{% extends "base.html" %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/auth.css' %}">

<div class="auth-wrapper" role="region" aria-labelledby="change-password-title">
  <div class="auth-card">

    <!-- Page heading for both users and screen-readers -->
    <h1 class="auth-title" id="change-password-title">Change Password üîê</h1>

    <form method="POST" aria-label="Change password form">
      {% csrf_token %}

      <!-- Current Password -->
      <div class="form-group mb-3">
        <label for="{{ form.old_password.id_for_label }}">Current Password:</label>
        <div class="password-row">
          {{ form.old_password }}

          <!-- Eye icon for toggling visibility -->
          <!-- ARIA added so screen readers know this is a button -->
          <svg class="password-toggle"
               role="button"
               tabindex="0"
               aria-label="Show or hide current password"
               onclick="togglePassword('{{ form.old_password.id_for_label }}')"
               onkeypress="if(event.key === 'Enter'){ togglePassword('{{ form.old_password.id_for_label }}') }"
               viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
        </div>
      </div>

      <!-- New Password -->
      <div class="form-group mb-3">
        <label for="{{ form.new_password1.id_for_label }}">New Password:</label>
        <div class="password-row">
          {{ form.new_password1 }}

          <!-- ARIA added for toggle icon -->
          <svg class="password-toggle"
               role="button"
               tabindex="0"
               aria-label="Show or hide new password"
               onclick="togglePassword('{{ form.new_password1.id_for_label }}')"
               onkeypress="if(event.key === 'Enter'){ togglePassword('{{ form.new_password1.id_for_label }}') }"
               viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
        </div>
      </div>

      <!-- Confirm New Password -->
      <div class="form-group mb-3">
        <label for="{{ form.new_password2.id_for_label }}">Confirm New Password:</label>
        <div class="password-row">
          {{ form.new_password2 }}

          <!-- ARIA added for toggle icon -->
          <svg class="password-toggle"
               role="button"
               tabindex="0"
               aria-label="Show or hide password confirmation"
               onclick="togglePassword('{{ form.new_password2.id_for_label }}')"
               onkeypress="if(event.key === 'Enter'){ togglePassword('{{ form.new_password2.id_for_label }}') }"
               viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
        </div>
      </div>

      <!-- Submit new password button -->
      <button type="submit"
              class="btn btn-outline w-100 mt-2"
              aria-label="Save new password">
        Save New Password
      </button>
    </form>

    <!-- Navigation back to user profile -->
    <p class="auth-alt-text mt-3">
      <a href="{% url 'profile' %}" aria-label="Back to your profile page">‚Üê Back to Profile</a>
    </p>

  </div>
</div>

{% endblock %}
