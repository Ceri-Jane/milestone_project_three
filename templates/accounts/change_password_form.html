{% extends "base.html" %}
{% load static %}

{# Page-specific SEO overrides: custom title + meta tags #}

{% block title %}
<title>QuickFlicks | Change Password</title>
{% endblock %}

{% block meta_description %}
<meta name="description" content="Securely change your QuickFlicks account password in your profile settings.">
{% endblock %}

{% block meta_keywords %}
<meta name="keywords" content="change password, update password, account security, quickflicks">
{% endblock %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/auth.css' %}">

<div class="auth-wrapper" role="region" aria-labelledby="change-password-title">
  <div class="auth-card">

    <!-- Page heading for both users and screen-readers -->
    <h1 class="auth-title" id="change-password-title">Change Password üîê</h1>

    <form method="POST" aria-label="Change password form">
      {% csrf_token %}

      <!-- Current Password -->
      <div class="form-group mb-3">
        <label for="{{ form.old_password.id_for_label }}">Current Password:</label>
        <div class="password-row">
          {{ form.old_password }}

          <!-- Eye icon for toggling visibility -->
          <!-- ARIA added so screen readers know this is a button -->
          <svg class="password-toggle"
          role="button"
          tabindex="0"
          aria-label="Toggle password visibility"
          aria-pressed="false"
          viewBox="0 0 24 24">
          <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
          <circle cx="12" cy="12" r="3"/>
          </svg>
        </div>
      </div>

      <!-- New Password -->
      <div class="form-group mb-3">
        <label for="{{ form.new_password1.id_for_label }}">New Password:</label>
        <div class="password-row">
          {{ form.new_password1 }}

          <!-- ARIA added for toggle icon -->
          <svg class="password-toggle"
          role="button"
          tabindex="0"
          aria-label="Toggle password visibility"
          aria-pressed="false"
          viewBox="0 0 24 24">
          <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
          <circle cx="12" cy="12" r="3"/>
          </svg>
        </div>
      </div>

      <!-- Confirm New Password -->
      <div class="form-group mb-3">
        <label for="{{ form.new_password2.id_for_label }}">Confirm New Password:</label>
        <div class="password-row">
          {{ form.new_password2 }}

          <!-- ARIA added for toggle icon -->
          <svg class="password-toggle"
          role="button"
          tabindex="0"
          aria-label="Toggle password visibility"
          aria-pressed="false"
          viewBox="0 0 24 24">
          <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
          <circle cx="12" cy="12" r="3"/>
          </svg>
        </div>
      </div>

      <!-- Submit new password button -->
      <button type="submit"
              class="btn btn-outline w-100 mt-2"
              aria-label="Save new password">
        Save New Password
      </button>
    </form>

    <!-- Navigation back to user profile -->
    <p class="auth-alt-text mt-3">
      <a href="{% url 'profile' %}" aria-label="Back to your profile page">‚Üê Back to Profile</a>
    </p>

  </div>
</div>

{% endblock %}
